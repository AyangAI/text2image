# 生成邀请码操作指南

## 📋 前置条件检查
✅ `generateInviteCodes` 云函数已创建  
✅ 云函数依赖已安装（node_modules 存在）  
✅ 云函数配置文件正常  

## 🚀 部署和生成步骤

### 第一步：在微信开发者工具中部署云函数

1. **打开微信开发者工具**
   - 确保已打开你的小程序项目
   - 切换到"云开发"标签页

2. **部署 generateInviteCodes 云函数**
   - 在左侧文件树中找到 `cloudfunctions/generateInviteCodes` 文件夹
   - 右键点击该文件夹
   - 选择"上传并部署：云端安装依赖（不上传 node_modules）"
   - 等待部署完成（通常需要1-2分钟）

3. **部署 register 云函数**（如果还未部署）
   - 同样右键点击 `cloudfunctions/register` 文件夹
   - 选择"上传并部署：云端安装依赖（不上传 node_modules）"

### 第二步：创建数据库集合

1. **进入云开发控制台**
   - 在微信开发者工具中点击"云开发"按钮
   - 进入云开发控制台

2. **创建 invitationCodes 集合**
   - 点击左侧菜单的"数据库"
   - 点击"创建集合"按钮
   - 集合名称输入：`invitationCodes`
   - 点击"确定"创建

### 第三步：生成邀请码

1. **进入云函数页面**
   - 在云开发控制台左侧菜单点击"云函数"
   - 找到 `generateInviteCodes` 函数

2. **测试调用云函数**
   - 点击 `generateInviteCodes` 函数名称
   - 点击"测试"按钮
   - 在测试参数框中输入：
   ```json
   {
     "count": 10
   }
   ```
   - 点击"运行测试"按钮

3. **查看执行结果**
   - 等待函数执行完成
   - 查看返回结果，应该显示成功生成的邀请码信息

### 第四步：查看生成的邀请码

1. **进入数据库页面**
   - 在云开发控制台左侧菜单点击"数据库"
   - 点击 `invitationCodes` 集合

2. **查看邀请码列表**
   - 你将看到10条新生成的邀请码记录
   - 每条记录包含：
     - `code`: 8位邀请码
     - `isUsed`: false（未使用）
     - `createdAt`: 创建时间

## 📝 邀请码示例
生成的邀请码格式类似：
- `A7B9C2D4`
- `F3G8H5J6`
- `K9L2M7N3`

## 🔧 如果需要生成更多邀请码

重复第三步，可以修改 `count` 参数：
```json
{
  "count": 20
}
```

## ⚠️ 注意事项

1. **确保云函数部署成功**
   - 如果部署失败，检查网络连接
   - 确保微信开发者工具版本是最新的

2. **数据库权限**
   - 确保云函数有数据库读写权限
   - 默认配置应该已经包含必要权限

3. **邀请码唯一性**
   - 系统会自动检查邀请码是否重复
   - 如果生成重复码，会自动重新生成

## 🎯 完成后的验证

1. **检查数据库**
   - 确认 `invitationCodes` 集合中有邀请码记录
   - 确认所有邀请码的 `isUsed` 字段为 `false`

2. **记录邀请码**
   - 将生成的邀请码记录下来
   - 分发给需要内测的用户

现在你可以开始使用这些邀请码进行小程序的内测了！